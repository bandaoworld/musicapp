{"version":3,"file":"js/searchView.5fb0cd75.js","mappings":"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","sources":["webpack://musicapp/./src/components/item/musicPlaylist.vue?ee41","webpack://musicapp/./src/components/item/musicPlaylist.vue","webpack://musicapp/./src/components/item/musicPlaylist.vue?9cc1","webpack://musicapp/./src/views/searchView.vue?8515","webpack://musicapp/./src/views/searchView.vue","webpack://musicapp/./src/views/searchView.vue?f180"],"sourcesContent":["import { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createBlock as _createBlock, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-6dcfb55b\"), n = n(), _popScopeId(), n);\n\nconst _hoisted_1 = {\n  class: \"itemList\"\n};\nconst _hoisted_2 = {\n  class: \"leftSpan\"\n};\nconst _hoisted_3 = {\n  class: \"songInfo\"\n};\n\nconst _hoisted_4 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  style: {\n    \"height\": \"1.4rem\"\n  }\n}, null, -1));\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_van_col = _resolveComponent(\"van-col\");\n\n  const _component_van_icon = _resolveComponent(\"van-icon\");\n\n  const _component_van_row = _resolveComponent(\"van-row\");\n\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createElementVNode(\"div\", _hoisted_1, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($props.itemList, (item, index) => {\n    return _openBlock(), _createBlock(_component_van_row, {\n      class: \"item\",\n      align: \"center\",\n      justify: \"space-between\",\n      key: index\n    }, {\n      default: _withCtx(() => [_createVNode(_component_van_col, {\n        span: \"16\",\n        class: \"itemLeft\",\n        onClick: $event => $options.playMusic(index)\n      }, {\n        default: _withCtx(() => [_createElementVNode(\"span\", _hoisted_2, _toDisplayString(index + 1), 1), _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"p\", null, _toDisplayString(item.name), 1), _createElementVNode(\"span\", null, _toDisplayString($setup.showAuthor(item.ar)), 1)])]),\n        _: 2\n      }, 1032, [\"onClick\"]), _createVNode(_component_van_col, {\n        span: \"6\",\n        class: \"itemRight\"\n      }, {\n        default: _withCtx(() => [item.mv != 0 ? (_openBlock(), _createBlock(_component_van_icon, {\n          key: 0,\n          name: \"tv-o\",\n          class: \"tv\",\n          size: \"30\",\n          onClick: $event => $setup.mvClick(item.mv)\n        }, null, 8, [\"onClick\"])) : _createCommentVNode(\"\", true), _createVNode(_component_van_icon, {\n          name: \"wap-nav\",\n          class: \"nav\",\n          size: \"30\"\n        })]),\n        _: 2\n      }, 1024)]),\n      _: 2\n    }, 1024);\n  }), 128))]), _hoisted_4], 64);\n}","import { reactive } from 'vue';\nimport { mapMutations } from 'vuex';\nexport default {\n  name: \"musicPlaylist\",\n  props: ['itemList'],\n\n  setup() {\n    function showAuthor(authorList) {\n      const authors = reactive([]);\n\n      for (let i = 0; i < authorList.length; i++) {\n        authors.push(authorList[i].name);\n      }\n\n      let author = authors.join(' / ');\n      return author;\n    }\n\n    function mvClick(mv) {\n      try {\n        location.assign('https://music.163.com/#/mv?id=' + mv);\n      } catch {\n        console.log(\"MV打开失败\");\n      }\n    }\n\n    return {\n      showAuthor,\n      mvClick\n    };\n  },\n\n  methods: {\n    playMusic(index) {\n      console.log(index);\n      this.updatePlaylist(this.itemList);\n      this.updatePlaylistIndex(index);\n    },\n\n    ...mapMutations(['updatePlaylist', 'updatePlaylistIndex'])\n  }\n};","/* unplugin-vue-components disabled */import { render } from \"./musicPlaylist.vue?vue&type=template&id=6dcfb55b&scoped=true\"\nimport script from \"./musicPlaylist.vue?vue&type=script&lang=js\"\nexport * from \"./musicPlaylist.vue?vue&type=script&lang=js\"\n\nimport \"./musicPlaylist.vue?vue&type=style&index=0&id=6dcfb55b&lang=less&scoped=true\"\n\nimport exportComponent from \"D:\\\\web\\\\NeteaseMusic\\\\musicapp\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6dcfb55b\"]])\n\nexport default __exports__","import { resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, vModelText as _vModelText, withKeys as _withKeys, createElementVNode as _createElementVNode, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-238344a3\"), n = n(), _popScopeId(), n);\n\nconst _hoisted_1 = {\n  class: \"searchView\"\n};\nconst _hoisted_2 = {\n  class: \"searchHistory\"\n};\n\nconst _hoisted_3 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", {\n  class: \"searchSpan\"\n}, \"搜索历史\", -1));\n\nconst _hoisted_4 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", {\n  style: {\n    \"font-size\": \"0.1rem\",\n    \"visibility\": \"hidden\"\n  }\n}, \"你猜这里写了啥\", -1));\n\nconst _hoisted_5 = [\"onClick\"];\n\nconst _hoisted_6 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", {\n  style: {\n    \"font-size\": \"0.1rem\",\n    \"visibility\": \"hidden\",\n    \"position\": \"absolute\",\n    \"right\": \"0.2rem\"\n  }\n}, \"占位而已\", -1));\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_van_icon = _resolveComponent(\"van-icon\");\n\n  const _component_van_col = _resolveComponent(\"van-col\");\n\n  const _component_van_row = _resolveComponent(\"van-row\");\n\n  const _component_musicPlaylist = _resolveComponent(\"musicPlaylist\");\n\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createElementVNode(\"div\", _hoisted_1, [_createVNode(_component_van_row, {\n    justify: \"space-between\",\n    align: \"center\",\n    class: \"searchTop\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_van_col, {\n      span: \"2\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_van_icon, {\n        name: \"arrow-left\",\n        size: \"0.6rem\",\n        color: \"#383838\",\n        onClick: _cache[0] || (_cache[0] = $event => _ctx.$router.go(-1))\n      })]),\n      _: 1\n    }), _createVNode(_component_van_col, {\n      span: \"18\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_van_icon, {\n        name: \"search\",\n        size: \"0.4rem\",\n        color: \"#383838\",\n        class: \"searchIcon\"\n      }), _withDirectives(_createElementVNode(\"input\", {\n        type: \"text\",\n        placeholder: \"陈奕迅\",\n        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => _ctx.searchKey = $event),\n        onKeydown: _cache[2] || (_cache[2] = _withKeys((...args) => $setup.enterKey && $setup.enterKey(...args), [\"enter\"]))\n      }, null, 544), [[_vModelText, _ctx.searchKey]])]),\n      _: 1\n    }), _createVNode(_component_van_col, {\n      span: \"2\"\n    }, {\n      default: _withCtx(() => [_createElementVNode(\"p\", {\n        onClick: _cache[3] || (_cache[3] = (...args) => $setup.enterKey && $setup.enterKey(...args))\n      }, \"搜索\")]),\n      _: 1\n    })]),\n    _: 1\n  })]), _createElementVNode(\"div\", _hoisted_2, [_hoisted_3, _hoisted_4, (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.keywordList, item => {\n    return _openBlock(), _createElementBlock(\"span\", {\n      key: item,\n      class: \"spanKey\",\n      onClick: $event => $setup.searchHistory(item)\n    }, _toDisplayString(item), 9, _hoisted_5);\n  }), 128)), _hoisted_6, _createVNode(_component_van_icon, {\n    name: \"delete-o\",\n    size: \"0.6rem\",\n    color: \"#383838\",\n    class: \"deleteIcon\",\n    onClick: $setup.deleteHistory\n  }, null, 8, [\"onClick\"]), _createVNode(_component_musicPlaylist, {\n    itemList: _ctx.resultList\n  }, null, 8, [\"itemList\"])])], 64);\n}","import { reactive, toRefs, onMounted } from 'vue';\nimport { getSearchMusic } from '@/request/api/home';\nimport musicPlaylist from '@/components/item/musicPlaylist';\nexport default {\n  name: \"searchView\",\n\n  setup() {\n    const state = reactive({\n      searchKey: '',\n      keywordList: [],\n      resultList: []\n    });\n\n    async function enterKey() {\n      // 如果非空\n      if (state.searchKey !== '') {\n        state.keywordList.unshift(state.searchKey); // 去重\n\n        state.keywordList = [...new Set(state.keywordList)]; // 固定长度\n\n        if (state.keywordList.length > 10) {\n          state.keywordList.splice(state.keywordList.length - 1, 1);\n        }\n\n        localStorage.setItem('keywordList', JSON.stringify(state.keywordList));\n        let response = await getSearchMusic(state.searchKey);\n        state.resultList = response.data.result.songs;\n        state.searchKey = ''; // console.log(state.keywordList);\n        // console.log(state);\n\n        console.log(\"搜索成功\");\n      }\n    }\n\n    async function searchHistory(item) {\n      let response = await getSearchMusic(item);\n      state.resultList = response.data.result.songs;\n      console.log(state.resultList);\n      console.log(\"搜索成功\");\n    }\n\n    function deleteHistory(event) {\n      localStorage.removeItem(\"keywordList\");\n      state.keywordList = [];\n    }\n\n    onMounted(() => {\n      state.keywordList = JSON.parse(localStorage.getItem('keywordList')) || [];\n    });\n    return {\n      state,\n      ...toRefs(state),\n      enterKey,\n      deleteHistory,\n      searchHistory\n    };\n  }\n\n};","/* unplugin-vue-components disabled */import { render } from \"./searchView.vue?vue&type=template&id=238344a3&scoped=true\"\nimport script from \"./searchView.vue?vue&type=script&lang=js\"\nexport * from \"./searchView.vue?vue&type=script&lang=js\"\n\nimport \"./searchView.vue?vue&type=style&index=0&id=238344a3&lang=less&scoped=true\"\n\nimport exportComponent from \"D:\\\\web\\\\NeteaseMusic\\\\musicapp\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-238344a3\"]])\n\nexport default __exports__"],"names":["_withScopeId","n","_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_","style","render","_ctx","_cache","$props","$setup","$data","$options","_component_van_col","_component_van_icon","_component_van_row","itemList","item","index","align","justify","key","default","span","onClick","$event","playMusic","name","showAuthor","ar","mv","size","mvClick","props","setup","authorList","authors","i","length","push","author","join","location","assign","console","log","methods","this","updatePlaylist","updatePlaylistIndex","__exports__","_hoisted_5","_hoisted_6","_component_musicPlaylist","color","$router","go","type","placeholder","searchKey","onKeydown","args","enterKey","keywordList","searchHistory","deleteHistory","resultList","state","async","unshift","Set","splice","localStorage","setItem","JSON","stringify","response","data","result","songs","event","removeItem","parse","getItem"],"sourceRoot":""}